Install Brew
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

Install Flux
curl -s https://fluxcd.io/install.sh | sudo FLUX_VERSION=2.3.0 bash

curl -s https://fluxcd.io/install.sh | sudo FLUX_VERSION=2.3.0 bash

flux bootstrap github --owner=hello2ashu --repository=fleet-infra --branch=main --path=./clusters/my-clsuter --personal

Use "flux get sources [command] --help" for more information about a command.
ashish@node1:~/git$ flux get sources all
NAME                            REVISION                SUSPENDED       READY   MESSAGE                                           
gitrepository/flux-system       main@sha1:a17d6f89      False           True    stored artifact for revision 'main@sha1:a17d6f89'

ashish@node1:~/git$ flux get sources git
NAME            REVISION                SUSPENDED       READY   MESSAGE                                           
flux-system     main@sha1:a17d6f89      False           True    stored artifact for revision 'main@sha1:a17d6f89'
ashish@node1:~/git$ flux get kustomizations
NAME            REVISION                SUSPENDED       READY   MESSAGE                              
flux-system     main@sha1:a17d6f89      False           True    Applied revision: main@sha1:a17d6f89
ashish@node1:~/git$ 


ADD A NEW GIT SOURCE
flux create source git webapp-latest --url https://github.com/hello2ashu/podinfo --branch=master 

Delete GIT SOURCE
flux delete source git webapp-latest

ashish@node1:~/git/fleet-infra$ flux get sources all 
NAME                            REVISION                SUSPENDED       READY   MESSAGE                                             
gitrepository/flux-system       main@sha1:56aa1c19      False           True    stored artifact for revision 'main@sha1:56aa1c19'  
gitrepository/webapp-latest     master@sha1:fbcc0a39    False           True    stored artifact for revision 'master@sha1:fbcc0a39

flux create kustomization webapp-latest --target-namespace=default --source=webapp-latest --path="./kustomize" --prune=true --interval=1m --retry-interval=2m --health-check-timeout=3m


flux reconcile source git webapp-latest

export git sources as yaml
flux export source git webapp-latest > 1.\ Flux\ command\ outputs/webapp-latest.yaml
flux export source git --all > 1.\ Flux\ command\ outputs/all-sources-into-yaml.yaml


flux create kustomization webapp-dev --target-namespace=ashish --source=webapp-latest --path="./kustomize" --prune=true --interval=1m --retry-interval=2m --health-check-timeout=3m

flux suspend kustomization webapp-latest
flux get kustomizations
NAME            REVISION                SUSPENDED       READY   MESSAGE
flux-system     main@sha1:56aa1c19      True            True    Applied revision: main@sha1:56aa1c19
webapp-dev      master@sha1:4bd33fb2    False           True    Applied revision: master@sha1:4bd33fb2
webapp-latest   master@sha1:4bd33fb2    True            True    Applied revision: master@sha1:4bd33fb2

ashish@C-FP94WH3:/mnt/c/Users/ashisgoe/OneDrive - Nokia/Nokia_laptop/4. Projects/git_training/podinfo/1. Flux command outputs$ flux get kustomizations
NAME            REVISION                SUSPENDED       READY   MESSAGE
flux-system     main@sha1:56aa1c19      False           True    Applied revision: main@sha1:56aa1c19
webapp-dev      master@sha1:4bd33fb2    False           True    Applied revision: master@sha1:4bd33fb2
webapp-latest   master@sha1:4bd33fb2    False           True    Applied revision: master@sha1:4bd33fb2
ashish@C-FP94WH3:/mnt/c/Users/ashisgoe/OneDrive - Nokia/Nokia_laptop/4. Projects/git_training/podinfo/1. Flux command outputs$ 


ashish@C-FP94WH3:/mnt/c/Users/ashisgoe/OneDrive - Nokia/Nokia_laptop/4. Projects/git_training/podinfo/1. Flux command outputs$ flux suspend kustomization webapp-dev
► suspending kustomization webapp-dev in flux-system namespace
✔ kustomization suspended
ashish@C-FP94WH3:/mnt/c/Users/ashisgoe/OneDrive - Nokia/Nokia_laptop/4. Projects/git_training/podinfo/1. Flux command outputs$ flux get kustomization
NAME            REVISION                SUSPENDED       READY   MESSAGE
flux-system     main@sha1:56aa1c19      False           True    Applied revision: main@sha1:56aa1c19
webapp-dev      master@sha1:b4c9c75c    True            True    Applied revision: master@sha1:b4c9c75c
ashish@C-FP94WH3:/mnt/c/Users/ashisgoe/OneDrive - Nokia/Nokia_laptop/4. Projects/git_training/podinfo/1. Flux command outputs$ flux get sources all -A
NAMESPACE       NAME                            REVISION                SUSPENDED       READY   MESSAGE
flux-system     gitrepository/flux-system       main@sha1:56aa1c19      False           True    stored artifact for revision 'main@sha1:56aa1c19'
flux-system     gitrepository/webapp-latest     master@sha1:a5905ea5    False           True    stored artifact for revision 'master@sha1:a5905ea5'

ashish@C-FP94WH3:/mnt/c/Users/ashisgoe/OneDrive - Nokia/Nokia_laptop/4. Projects/git_training/podinfo/1. Flux command outputs$ flux get sources all -A
NAMESPACE       NAME                            REVISION                SUSPENDED       READY   MESSAGE
flux-system     gitrepository/flux-system       main@sha1:56aa1c19      False           True    stored artifact for revision 'main@sha1:56aa1c19'
flux-system     gitrepository/webapp-latest     master@sha1:a5905ea5    False           True    stored artifact for revision 'master@sha1:a5905ea5'

ashish@C-FP94WH3:/mnt/c/Users/ashisgoe/OneDrive - Nokia/Nokia_laptop/4. Projects/git_training/podinfo/1. Flux command outputs$ flux get kustomization
NAME            REVISION                SUSPENDED       READY   MESSAGE
flux-system     main@sha1:56aa1c19      False           True    Applied revision: main@sha1:56aa1c19
webapp-dev      master@sha1:b4c9c75c    True            True    Applied revision: master@sha1:b4c9c75c
ashish@C-FP94WH3:/mnt/c/Users/ashisgoe/OneDrive - Nokia/Nokia_laptop/4. Projects/git_training/podinfo/1. Flux command outputs$ flux resume kustomization webapp-dev
► resuming kustomization webapp-dev in flux-system namespace
✔ kustomization resumed
◎ waiting for Kustomization reconciliation
✔ Kustomization webapp-dev reconciliation completed
✔ applied revision master@sha1:a5905ea587f9454d243b29b139469d2652aba42c
ashish@C-FP94WH3:/mnt/c/Users/ashisgoe/OneDrive - Nokia/Nokia_laptop/4. Projects/git_training/podinfo/1. Flux command outputs$ flux get kustomization
NAME            REVISION                SUSPENDED       READY   MESSAGE
flux-system     main@sha1:56aa1c19      False           True    Applied revision: main@sha1:56aa1c19
webapp-dev      master@sha1:a5905ea5    False           True    Applied revision: master@sha1:a5905ea5

flux reconcile kustomization webapp-dev

ashisgoe@M-C02DV9YAMD6R ~ % flux export source git --all --with-credentials
---
apiVersion: source.toolkit.fluxcd.io/v1
kind: GitRepository
metadata:
  name: fleet-infra
  namespace: flux-system
spec:
  interval: 1m0s
  ref:
    branch: main
  timeout: 1m0s
  url: https://github.com/hello2ashu/fleet-infra.git
---
apiVersion: source.toolkit.fluxcd.io/v1
kind: GitRepository
metadata:
  name: test
  namespace: flux-system
spec:
  interval: 1m0s
  ref:
    branch: master
  secretRef:
    name: test
  timeout: 1m0s
  url: https://github.com/hello2ashu/podinfo.git
---
apiVersion: v1
data:
  password: Z2hwX0M2MnV5aVJQUGU4TjNldk1KNUdueG05c0F6REU3RTJJRXhYVQ==
  username: aGVsbG8yYXNodUBnbWFpbC5jb20=
kind: Secret
metadata:
  name: test
  namespace: flux-system
type: Opaque

